<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ú–∏–Ω—ã</title>
<style>
body {
    font-family: Arial, Helvetica, sans-serif;
    background: #f9f9f9;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    padding: 20px;
}

.card {
    background: white;
    padding: 25px 35px;
    border-radius: 20px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.12);
    max-width: 400px;
    width: 100%;
    text-align: center;
}

.card h1 {
    margin-bottom: 15px;
    font-size: 26px;
    color: #222;
}

#chance {
    margin-bottom: 10px;
    font-size: 16px;
    font-weight: bold;
    min-height: 20px;
}

#board {
    display: grid;
    grid-template-columns: repeat(5, 60px);
    grid-template-rows: repeat(5, 60px);
    gap: 5px;
    justify-content: center;
    margin-bottom: 15px;
    position: relative;
}

.cell {
    background: #f0f0f0;
    font-size: 24px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border-radius: 6px;
    transition: background 0.2s;
}

.cell:hover {
    background: #e0e0e0;
}

.buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 10px;
}

.button, select {
    padding: 8px 15px;
    border-radius: 12px;
    border: none;
    background: black;
    color: white;
    font-size: 14px;
    cursor: pointer;
    text-decoration: none;
    transition: opacity 0.2s;
}

.button:hover, select:hover {
    opacity: 0.85;
}
</style>
</head>
<body>

<div class="card">
    <h1>–ú–∏–Ω—ã</h1>

    <div id="chance">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω</div>

    <div class="buttons">
        <select id="mineCount">
            <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 1‚Äì24 -->
            <script>
            for(let i=1;i<=24;i++){
                document.write(`<option value="${i}">${i} –º–∏–Ω</option>`);
            }
            </script>
        </select>
        <button class="button" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        <button class="button" onclick="resetBoard()">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <a class="button" href="lebedin1st.html">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</a>
    </div>

    <div id="board"></div>
</div>

<script>
const board = document.getElementById('board');
const chanceDisplay = document.getElementById('chance');
let cells = [];
let mines = [];
let mineCount = 1;
let gameOver = false;

function startGame(){
    mineCount = parseInt(document.getElementById('mineCount').value);
    createBoard();
    calculateChance();
}

function createBoard(){
    board.innerHTML = '';
    cells = [];
    mines = [];
    gameOver = false;
    chanceDisplay.style.display = 'block';

    // –†–∞–∑–º–µ—â–µ–Ω–∏–µ –º–∏–Ω —Å–ª—É—á–∞–π–Ω–æ
    let allIndices = Array.from({length:25}, (_,i)=>i);
    for(let i=0;i<mineCount;i++){
        let idx = allIndices.splice(Math.floor(Math.random()*allIndices.length),1)[0];
        mines.push(idx);
    }

    for(let i=0;i<25;i++){
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.addEventListener('click', ()=>clickCell(i));
        board.appendChild(cell);
        cells.push(cell);
    }
}

function clickCell(i){
    if(gameOver || cells[i].textContent!=='') return;

    if(mines.includes(i)){
        cells[i].textContent = 'üí£';
        gameOver = true;
        chanceDisplay.textContent = '–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏';
    } else {
        cells[i].textContent = '‚úÖ';
        calculateChance();
        checkWin();
    }
}

function calculateChance(){
    if(gameOver) return;
    let unopened = cells.filter(c=>c.textContent==='').length;
    let remainingMines = mineCount - cells.filter(c=>c.textContent==='üí£').length;
    let chance = unopened>0 ? ((unopened-remainingMines)/unopened)*100 : 0;
    chanceDisplay.textContent = '–®–∞–Ω—Å —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ö–æ–¥–∞: ' + chance.toFixed(2) + '%';
}

function checkWin(){
    let safeOpened = cells.filter(c=>c.textContent==='‚úÖ').length;
    if(safeOpened === 25 - mineCount){
        gameOver = true;
        let openedPercent = ((safeOpened)/(25 - mineCount)*100).toFixed(2);
        chanceDisplay.textContent = '–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏! –ü—Ä–æ–≥—Ä–µ—Å—Å: '+openedPercent+'%';
    }
}

function resetBoard(){
    createBoard();
}
</script>

</body>
  </html>
